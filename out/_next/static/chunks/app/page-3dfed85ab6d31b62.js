(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7118:function(e,t,o){Promise.resolve().then(o.bind(o,3567))},3567:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Home}});var r=o(7437),n=o(2265);function timeAgo(e){if(!e)return"";let t=new Date(e),o=new Date,r=o-t,n=Math.floor(r/6e4),i=Math.floor(r/36e5),l=Math.floor(r/864e5);return n<1?"just now":n<60?"".concat(n,"m ago"):i<24?"".concat(i,"h ago"):l<7?"".concat(l,"d ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function getCompletedIds(){try{return JSON.parse(localStorage.getItem("cc_done")||"[]")}catch(e){return[]}}function getDragOverrides(){try{return JSON.parse(localStorage.getItem("cc_drag")||"{}")}catch(e){return{}}}function saveDragOverrides(e){localStorage.setItem("cc_drag",JSON.stringify(e))}function getUserTasks(){try{return JSON.parse(localStorage.getItem("cc_user_tasks")||"[]")}catch(e){return[]}}function saveUserTasks(e){localStorage.setItem("cc_user_tasks",JSON.stringify(e))}function getColumnOrder(){try{return JSON.parse(localStorage.getItem("cc_col_order")||"{}")}catch(e){return{}}}function saveColumnOrder(e){localStorage.setItem("cc_col_order",JSON.stringify(e))}function getAllTasks(e){let t=e.tasks||{};return[...t.todo||[],...t.upnext||[],...t.in_progress||[],...t.done||[]]}function isInDoneArray(e,t){return((t.tasks||{}).done||[]).some(t=>t.id===e.id)}function isInUpnextArray(e,t){return((t.tasks||{}).upnext||[]).some(t=>t.id===e.id)}function isTaskDone(e,t,o){return!!o.includes(e.id)||isInDoneArray(e,t)}function getAssignees(e){let t=new Set;return getAllTasks(e).forEach(e=>{e.assignee&&t.add(e.assignee)}),Array.from(t)}let i={high:0,medium:1,low:2};function sortByPriority(e){return[...e].sort((e,t)=>{var o,r;return(null!==(o=i[e.priority])&&void 0!==o?o:1)-(null!==(r=i[t.priority])&&void 0!==r?r:1)})}function applyEdits(e,t){return t&&0!==Object.keys(t).length?e.map(e=>t[e.id]?{...e,...t[e.id]}:e):e}function applyColumnOrder(e,t,o){let r=o[t];if(!r||0===r.length)return e;let n={};return r.forEach((e,t)=>{n[e]=t}),[...e].sort((e,t)=>{var o,r;let i=null!==(o=n[e.id])&&void 0!==o?o:999,l=null!==(r=n[t.id])&&void 0!==r?r:999;return 999!==i||999!==l?i-l:0})}function OmnisearchBar(e){var t;let{data:o,onNavigate:i,userTasks:l}=e,[a,d]=(0,n.useState)(""),[s,c]=(0,n.useState)(!1),p=(0,n.useRef)(null),x=(0,n.useMemo)(()=>{if(!a.trim()||!o)return[];let e=a.toLowerCase().trim(),t=[];return(o.projects||[]).forEach(o=>{(o.name.toLowerCase().includes(e)||(o.description||"").toLowerCase().includes(e))&&t.push({type:"project",label:o.name,sub:o.description,id:o.id,color:o.color}),getAllTasks(o).forEach(r=>{(r.title.toLowerCase().includes(e)||(r.description||"").toLowerCase().includes(e))&&t.push({type:"task",label:r.title,sub:"".concat(o.name),id:r.id,projectId:o.id,color:o.color})})}),(o.todos||[]).forEach(o=>{(o.title.toLowerCase().includes(e)||(o.description||"").toLowerCase().includes(e))&&t.push({type:"todo",label:o.title,sub:"General To-Do",id:o.id,color:"#60a5fa"})}),(o.potentialBusinesses||[]).forEach(o=>{(o.title.toLowerCase().includes(e)||(o.idea||"").toLowerCase().includes(e)||(o.notes||"").toLowerCase().includes(e))&&t.push({type:"idea",label:o.title,sub:o.idea?o.idea.slice(0,80):"Potential Idea",id:o.id,color:"#f59e0b"})}),(l||[]).forEach(o=>{(o.title.toLowerCase().includes(e)||(o.description||"").toLowerCase().includes(e))&&t.push({type:"task",label:o.title,sub:o._projectId||"User Task",id:o.id,color:"#60a5fa"})}),t.slice(0,12)},[a,o,l]),u=s&&a.trim().length>0&&x.length>0;(0,n.useEffect)(()=>{let handler=e=>{var t,o;(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),null===(t=p.current)||void 0===t||t.focus()),"Escape"===e.key&&(c(!1),null===(o=p.current)||void 0===o||o.blur())};return window.addEventListener("keydown",handler),()=>window.removeEventListener("keydown",handler)},[]);let g={project:"P",task:"T",todo:"G",idea:"I"},f={project:"Project",task:"Task",todo:"To-Do",idea:"Idea"};return(0,r.jsxs)("div",{style:{position:"relative",flex:1,maxWidth:"480px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#163344",border:"1px solid "+(s?"#60a5fa":"#1e4258"),borderRadius:"10px",padding:"8px 14px",transition:"border-color 0.15s"},children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#64748b",strokeWidth:"2",strokeLinecap:"round",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("path",{d:"M21 21l-4.35-4.35"})]}),(0,r.jsx)("input",{ref:p,value:a,onChange:e=>d(e.target.value),onFocus:()=>c(!0),onBlur:()=>setTimeout(()=>c(!1),150),placeholder:"Search projects, tasks, ideas...",style:{flex:1,background:"none",border:"none",outline:"none",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit"}}),(0,r.jsxs)("kbd",{style:{fontSize:"10px",color:"#475569",backgroundColor:"#0a2233",padding:"2px 6px",borderRadius:"4px",border:"1px solid #334155"},children:["undefined"!=typeof navigator&&(null===(t=navigator.platform)||void 0===t?void 0:t.includes("Mac"))?"⌘":"Ctrl","+K"]})]}),u&&(0,r.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",backgroundColor:"#163344",border:"1px solid #1e4258",borderRadius:"10px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:100,maxHeight:"320px",overflowY:"auto"},children:x.map((e,t)=>(0,r.jsxs)("div",{onMouseDown:()=>{"project"===e.type?i("project",e.id):e.projectId?i("project",e.projectId):"idea"===e.type&&i("ideas",e.id),d("")},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 14px",cursor:"pointer",borderBottom:t<x.length-1?"1px solid #1e4258":"none",transition:"background-color 0.1s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#253347",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,r.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"6px",backgroundColor:(e.color||"#64748b")+"20",color:e.color||"#64748b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:700,flexShrink:0},children:g[e.type]}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,r.jsx)("div",{style:{fontSize:"13px",fontWeight:600,color:"#f8fafc",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.label}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#64748b",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.sub})]}),(0,r.jsx)("span",{style:{fontSize:"9px",color:"#475569",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.5px"},children:f[e.type]})]},e.id+"-"+t))})]})}function ChangeRequestPopout(e){let{onClose:t}=e,[o,i]=(0,n.useState)(""),[l,a]=(0,n.useState)(!1),[d,s]=(0,n.useState)(!1),handleSubmit=async()=>{if(o.trim()&&!l){a(!0);try{let e={id:Date.now().toString(36),text:o.trim(),createdAt:new Date().toISOString(),status:"pending"},r=JSON.parse(localStorage.getItem("cc_change_requests")||"[]");r.push(e),localStorage.setItem("cc_change_requests",JSON.stringify(r));try{await fetch("/api/change-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){}s(!0),setTimeout(()=>t(),1500)}catch(e){a(!1)}}};return(0,r.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"8px",width:"340px",backgroundColor:"#163344",border:"1px solid #1e4258",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:100,padding:"16px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,r.jsx)("span",{style:{fontWeight:700,fontSize:"14px",color:"#f8fafc"},children:"Request a Change"}),(0,r.jsx)("button",{onClick:t,style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"16px",padding:"4px"},children:"\xd7"})]}),d?(0,r.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#4ade80",fontSize:"13px"},children:"Request saved. Ariel will pick it up."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("textarea",{autoFocus:!0,value:o,onChange:e=>i(e.target.value),placeholder:"Describe the change you'd like to see on the dashboard...",rows:4,style:{width:"100%",boxSizing:"border-box",backgroundColor:"#0a2233",border:"1px solid #334155",borderRadius:"8px",padding:"10px",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit",outline:"none",resize:"vertical"}}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:(0,r.jsx)("button",{onClick:handleSubmit,disabled:!o.trim()||l,style:{backgroundColor:o.trim()&&!l?"#8b5cf6":"#334155",color:o.trim()&&!l?"#fff":"#64748b",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"13px",fontWeight:600,cursor:o.trim()&&!l?"pointer":"default"},children:l?"Saving...":"Submit"})})]})]})}function DueDatePicker(e){let{taskId:t,currentDueDate:o,onSetDueDate:i,onClose:l,anchorRect:a}=e,[d,s]=(0,n.useState)(o||""),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{let handleKey=e=>{"Escape"===e.key&&(e.stopPropagation(),l())},handleClick=e=>{c.current&&!c.current.contains(e.target)&&l()};return window.addEventListener("keydown",handleKey),window.addEventListener("mousedown",handleClick),()=>{window.removeEventListener("keydown",handleKey),window.removeEventListener("mousedown",handleClick)}},[l]);let p=a?{position:"fixed",top:a.bottom+4,right:Math.max(8,window.innerWidth-a.right),backgroundColor:"#163344",border:"1px solid #1e4258",borderRadius:"10px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:1e4,padding:"12px",width:"220px"}:{position:"absolute",top:"100%",right:0,marginTop:"4px",backgroundColor:"#163344",border:"1px solid #1e4258",borderRadius:"10px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:1e4,padding:"12px",width:"220px"};return(0,r.jsxs)("div",{ref:c,style:p,onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",marginBottom:"8px"},children:"Set Due Date"}),(0,r.jsx)("input",{type:"date",value:d,onChange:e=>s(e.target.value),style:{width:"100%",boxSizing:"border-box",backgroundColor:"#0a2233",border:"1px solid #334155",borderRadius:"6px",padding:"8px",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit",outline:"none",colorScheme:"dark"}}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px"},children:[d&&(0,r.jsx)("button",{onClick:()=>{i(t,""),l()},style:{background:"none",border:"none",color:"#f87171",cursor:"pointer",fontSize:"11px",padding:"4px"},children:"Clear"}),(0,r.jsx)("div",{style:{flex:1}}),(0,r.jsx)("button",{onClick:l,style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"12px",padding:"4px 8px"},children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{i(t,d),l()},disabled:!d,style:{backgroundColor:d?"#60a5fa":"#334155",color:d?"#fff":"#64748b",border:"none",borderRadius:"6px",padding:"4px 12px",fontSize:"12px",fontWeight:600,cursor:d?"pointer":"default"},children:"Set"})]})]})}function ReminderPicker(e){let{taskId:t,taskTitle:o,onClose:i,anchorRect:l}=e,[a,d]=(0,n.useState)(""),[s,c]=(0,n.useState)("09:00"),[p,x]=(0,n.useState)(!1),u=(0,n.useRef)(null);(0,n.useEffect)(()=>{let handleKey=e=>{"Escape"===e.key&&(e.stopPropagation(),i())},handleClick=e=>{u.current&&!u.current.contains(e.target)&&i()};return window.addEventListener("keydown",handleKey),window.addEventListener("mousedown",handleClick),()=>{window.removeEventListener("keydown",handleKey),window.removeEventListener("mousedown",handleClick)}},[i]);let g=l?{position:"fixed",top:l.bottom+4,right:Math.max(8,window.innerWidth-l.right),backgroundColor:"#163344",border:"1px solid #1e4258",borderRadius:"10px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:1e4,padding:"12px",width:"240px"}:{position:"absolute",top:"100%",right:0,marginTop:"4px",backgroundColor:"#163344",border:"1px solid #1e4258",borderRadius:"10px",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:1e4,padding:"12px",width:"240px"};return(0,r.jsx)("div",{ref:u,style:g,onClick:e=>e.stopPropagation(),children:p?(0,r.jsx)("div",{style:{textAlign:"center",padding:"12px",color:"#4ade80",fontSize:"13px"},children:"Reminder set"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",marginBottom:"8px"},children:"Set Reminder"}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#64748b",marginBottom:"8px"},children:"You'll get an email at the chosen time."}),(0,r.jsx)("input",{type:"date",value:a,onChange:e=>d(e.target.value),style:{width:"100%",boxSizing:"border-box",backgroundColor:"#0a2233",border:"1px solid #334155",borderRadius:"6px",padding:"8px",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit",outline:"none",colorScheme:"dark",marginBottom:"6px"}}),(0,r.jsx)("input",{type:"time",value:s,onChange:e=>c(e.target.value),style:{width:"100%",boxSizing:"border-box",backgroundColor:"#0a2233",border:"1px solid #334155",borderRadius:"6px",padding:"8px",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit",outline:"none",colorScheme:"dark"}}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",marginTop:"10px"},children:[(0,r.jsx)("button",{onClick:i,style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"12px",padding:"4px 8px"},children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(!a||!s)return;let e=JSON.parse(localStorage.getItem("cc_reminders")||"[]");e.push({id:Date.now().toString(36),taskId:t,taskTitle:o,datetime:"".concat(a,"T").concat(s,":00"),createdAt:new Date().toISOString(),status:"pending"}),localStorage.setItem("cc_reminders",JSON.stringify(e)),x(!0),setTimeout(i,1200)},disabled:!a,style:{backgroundColor:a?"#f59e0b":"#334155",color:a?"#fff":"#64748b",border:"none",borderRadius:"6px",padding:"4px 12px",fontSize:"12px",fontWeight:600,cursor:a?"pointer":"default"},children:"Set Reminder"})]})]})})}function EditCardModal(e){let{task:t,onSave:o,onClose:i}=e,[l,a]=(0,n.useState)(t.title||""),[d,s]=(0,n.useState)(t.description||""),[c,p]=(0,n.useState)(t.priority||"medium"),[x,u]=(0,n.useState)((t.tags||[]).join(", ")),g={width:"100%",boxSizing:"border-box",backgroundColor:"#0a2233",border:"1px solid #334155",borderRadius:"8px",padding:"10px 12px",color:"#f8fafc",fontSize:"14px",fontFamily:"inherit",outline:"none"};return(0,r.jsx)("div",{onClick:i,style:{position:"fixed",inset:0,zIndex:200,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{backgroundColor:"#163344",borderRadius:"14px",border:"1px solid #1e4258",width:"100%",maxWidth:"440px",boxShadow:"0 12px 40px rgba(0,0,0,0.5)",padding:"24px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,r.jsx)("span",{style:{fontWeight:700,fontSize:"16px",color:"#f8fafc"},children:"Edit Card"}),(0,r.jsx)("button",{onClick:i,style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"20px",padding:"4px"},children:"\xd7"})]}),(0,r.jsxs)("div",{style:{marginBottom:"14px"},children:[(0,r.jsx)("label",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",display:"block",marginBottom:"6px"},children:"Title"}),(0,r.jsx)("input",{autoFocus:!0,value:l,onChange:e=>a(e.target.value),style:g})]}),(0,r.jsxs)("div",{style:{marginBottom:"14px"},children:[(0,r.jsx)("label",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",display:"block",marginBottom:"6px"},children:"Description"}),(0,r.jsx)("textarea",{value:d,onChange:e=>s(e.target.value),rows:3,style:{...g,resize:"vertical"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"14px"},children:[(0,r.jsx)("label",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",display:"block",marginBottom:"6px"},children:"Priority"}),(0,r.jsx)("div",{style:{display:"flex",gap:"8px"},children:["high","medium","low"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>p(e),style:{padding:"6px 14px",borderRadius:"6px",fontSize:"12px",fontWeight:600,border:c===e?"2px solid":"1px solid #334155",borderColor:c===e?"high"===e?"#fb923c":"medium"===e?"#a78bfa":"#64748b":"#334155",backgroundColor:"high"===e?"#451a03":"medium"===e?"#1e1b4b":"#0f172a",color:"high"===e?"#fb923c":"medium"===e?"#a78bfa":"#64748b",cursor:"pointer"},children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("label",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",display:"block",marginBottom:"6px"},children:"Tags (comma-separated)"}),(0,r.jsx)("input",{value:x,onChange:e=>u(e.target.value),placeholder:"e.g. urgent, frontend, design",style:g})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,r.jsx)("button",{onClick:i,style:{background:"none",border:"1px solid #334155",borderRadius:"8px",color:"#94a3b8",cursor:"pointer",fontSize:"13px",fontWeight:600,padding:"8px 16px"},children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{l.trim()&&(o({...t,title:l.trim(),description:d.trim()||void 0,priority:c,tags:x.split(",").map(e=>e.trim()).filter(Boolean)}),i())},disabled:!l.trim(),style:{backgroundColor:l.trim()?"#8b5cf6":"#334155",color:l.trim()?"#fff":"#64748b",border:"none",borderRadius:"8px",padding:"8px 20px",fontSize:"13px",fontWeight:600,cursor:l.trim()?"pointer":"default"},children:"Save"})]})]})})}function AddTaskForm(e){let{projectId:t,column:o,assignee:i,accentColor:l,onAdd:a,onCancel:d}=e,[s,c]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[u,g]=(0,n.useState)("medium"),[f,h]=(0,n.useState)(!1),[b,m]=(0,n.useState)(null),handleSubmit=async e=>{if(e.preventDefault(),!s.trim()||f)return;h(!0);let r={id:"u-"+Date.now().toString(36),title:s.trim(),description:p.trim()||void 0,priority:u,tags:["user-added"],assignee:i||void 0,createdAt:new Date().toISOString(),_userAdded:!0,_projectId:t,_column:o};a(r),c(""),x(""),g("medium"),h(!1),m("syncing");try{let e=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:r,projectId:t,column:o})});if(e.ok){m("synced");let e=JSON.parse(localStorage.getItem("cc_user_tasks")||"[]"),t=e.filter(e=>e.id!==r.id);localStorage.setItem("cc_user_tasks",JSON.stringify(t))}else m("error")}catch(e){m("error")}},y={width:"100%",boxSizing:"border-box",backgroundColor:"#163344",border:"1px solid #334155",borderRadius:"6px",padding:"8px 10px",color:"#f8fafc",fontSize:"13px",outline:"none",fontFamily:"inherit"};return(0,r.jsxs)("form",{onSubmit:handleSubmit,style:{backgroundColor:"#0a2233",borderRadius:"8px",padding:"12px",marginBottom:"8px",borderLeft:"3px solid ".concat(l)},children:[(0,r.jsx)("input",{autoFocus:!0,placeholder:"Task title...",value:s,onChange:e=>c(e.target.value),style:y}),(0,r.jsx)("textarea",{placeholder:"Description (optional)",value:p,onChange:e=>x(e.target.value),rows:2,style:{...y,marginTop:"6px",resize:"vertical"}}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"8px"},children:[["high","medium","low"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>g(e),style:{padding:"3px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:600,border:u===e?"1px solid":"1px solid transparent",borderColor:u===e?"high"===e?"#fb923c":"medium"===e?"#a78bfa":"#64748b":"transparent",backgroundColor:"high"===e?"#451a03":"medium"===e?"#1e1b4b":"#0f172a",color:"high"===e?"#fb923c":"medium"===e?"#a78bfa":"#64748b",cursor:"pointer"},children:e.charAt(0).toUpperCase()+e.slice(1)},e)),(0,r.jsx)("div",{style:{flex:1}}),(0,r.jsx)("button",{type:"button",onClick:d,style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"12px",padding:"4px 8px"},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:!s.trim()||f,style:{backgroundColor:s.trim()&&!f?l:"#334155",color:s.trim()&&!f?"#fff":"#64748b",border:"none",borderRadius:"6px",padding:"5px 12px",fontSize:"12px",fontWeight:600,cursor:s.trim()&&!f?"pointer":"default"},children:f?"Adding...":"Add"})]}),b&&(0,r.jsx)("div",{style:{fontSize:"11px",marginTop:"6px",textAlign:"right",color:"synced"===b?"#4ade80":"error"===b?"#f87171":"#94a3b8"},children:"syncing"===b?"Saving to server...":"synced"===b?"Saved permanently":"Saved locally (server sync failed — will retry on next add)"})]})}function AddButton(e){let{onClick:t,color:o}=e;return(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),t()},style:{width:"20px",height:"20px",borderRadius:"4px",border:"1px solid #334155",background:"none",color:"#64748b",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,lineHeight:1,transition:"all 0.15s"},onMouseEnter:e=>{e.currentTarget.style.borderColor=o,e.currentTarget.style.color=o},onMouseLeave:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color="#64748b"},title:"Add task",children:"+"})}function ProjectOverviewCard(e){let t,{project:o,completedIds:n,dragOverrides:i,onClick:l,userTasks:a}=e,d=(a||[]).filter(e=>e._projectId===o.id),s=[...getAllTasks(o),...d],c=getAssignees(o),p=c.length>0,getEffectiveColumn=e=>{let t=i[e.id];return"__done__"===t?"done":"__upnext__"===t?"upnext":"__todo__"===t?"todo":isTaskDone(e,o,n)?"done":e._userAdded?"__upnext__"===e._column?"upnext":"todo":isInUpnextArray(e,o)?"upnext":"todo"},x=s.filter(e=>"done"===getEffectiveColumn(e)).length,u={mordy:"#f97316",yaakov:"#8b5cf6"};if(p){let e=s.filter(e=>"done"!==getEffectiveColumn(e));t=c.map(t=>({label:t.charAt(0).toUpperCase()+t.slice(1),count:e.filter(e=>(e.assignee||"")===t).length,color:u[t]||"#60a5fa"}));let o=e.filter(e=>!e.assignee).length;o>0&&t.unshift({label:"General",count:o,color:"#94a3b8"}),t.push({label:"Done",count:x,color:"#4ade80"})}else{let e=s.filter(e=>"todo"===getEffectiveColumn(e)).length,o=s.filter(e=>"upnext"===getEffectiveColumn(e)).length;t=[{label:"To Do",count:e,color:"#94a3b8"},{label:"Up Next",count:o,color:"#60a5fa"},{label:"Done",count:x,color:"#4ade80"}]}return(0,r.jsxs)("div",{onClick:l,style:{backgroundColor:"#163344",borderRadius:"12px",border:"1px solid #1e4258",padding:"24px",cursor:"pointer",transition:"border-color 0.15s, transform 0.15s",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.borderColor=o.color,e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#1e4258",e.currentTarget.style.transform="translateY(0)"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",backgroundColor:o.color}}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:o.color+"20",color:o.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:700},children:o.icon||o.name.charAt(0)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"16px",color:"#f8fafc"},children:o.name}),o.description&&(0,r.jsx)("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"2px"},children:o.description})]})]}),(0,r.jsx)("div",{style:{display:"flex",gap:"6px"},children:t.map(e=>(0,r.jsxs)("div",{style:{flex:1,textAlign:"center",padding:"8px 4px",borderRadius:"8px",backgroundColor:"#0a2233"},children:[(0,r.jsx)("div",{style:{fontSize:"18px",fontWeight:700,color:e.color},children:e.count}),(0,r.jsx)("div",{style:{fontSize:"9px",color:"#64748b",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.5px"},children:e.label})]},e.label))})]})}function TaskCard(e){let{task:t,accentColor:o,isDone:i,onToggle:l,dueDates:a,onSetDueDate:d,onEdit:s,index:c,onReorder:p}=e,[x,u]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[h,b]=(0,n.useState)(null),m={high:{bg:"#451a03",text:"#fb923c",label:"High"},medium:{bg:"#1e1b4b",text:"#a78bfa",label:"Medium"},low:{bg:"#0f172a",text:"#64748b",label:"Low"}}[t.priority]||null,y=a[t.id]||t.dueDate,v=y&&new Date(y)<new Date&&!i,j=x||g;return(0,r.jsx)("div",{draggable:"true","data-task-id":t.id,onDragStart:e=>{e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.setData("application/x-index",String(c)),e.dataTransfer.effectAllowed="move",e.currentTarget.style.opacity="0.4"},onDragEnd:e=>{e.currentTarget.style.opacity=i?"0.6":"1",document.querySelectorAll("[data-drop-column]").forEach(e=>{e.dispatchEvent(new CustomEvent("dragreset"))})},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move"},onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let o=e.dataTransfer.getData("text/plain");o&&o!==t.id&&p&&p(o,t.id),document.querySelectorAll("[data-drop-column]").forEach(e=>{e.dispatchEvent(new CustomEvent("dragreset"))})},onDoubleClick:()=>{s&&!i&&s(t)},style:{backgroundColor:"#0a2233",borderRadius:"8px",padding:"14px",borderLeft:"3px solid ".concat(i?"#4ade80":v?"#f87171":o),marginBottom:"8px",opacity:i?.6:1,transition:"opacity 0.2s",cursor:"grab",position:"relative",zIndex:j?500:"auto"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[(0,r.jsx)("div",{onClick:e=>{e.stopPropagation(),l(t.id)},style:{width:"20px",height:"20px",minWidth:"20px",borderRadius:"4px",border:i?"2px solid #4ade80":"2px solid #475569",backgroundColor:i?"#4ade8020":"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"1px",transition:"all 0.15s"},onMouseEnter:e=>{i||(e.currentTarget.style.borderColor="#94a3b8")},onMouseLeave:e=>{i||(e.currentTarget.style.borderColor="#475569")},children:i&&(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,r.jsx)("path",{d:"M2 6L5 9L10 3",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontWeight:600,fontSize:"13px",color:i?"#64748b":"#f8fafc",marginBottom:"4px",lineHeight:1.4,textDecoration:i?"line-through":"none"},children:t.title}),t.description&&!i&&(0,r.jsx)("div",{style:{fontSize:"12px",color:"#94a3b8",lineHeight:1.4,marginBottom:"8px"},children:t.description}),!i&&(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[m&&(0,r.jsx)("span",{style:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",fontWeight:600,backgroundColor:m.bg,color:m.text},children:m.label}),t.assignee&&(0,r.jsx)("span",{style:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",fontWeight:600,backgroundColor:"mordy"===t.assignee?"#7c2d1220":"#4c1d9520",color:"mordy"===t.assignee?"#f97316":"#8b5cf6"},children:t.assignee}),t.tags&&t.tags.map(e=>(0,r.jsx)("span",{style:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",backgroundColor:"#163344",color:"#94a3b8"},children:e},e)),y&&(0,r.jsxs)("span",{style:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",fontWeight:600,backgroundColor:v?"#7f1d1d":"#1e3a5f",color:v?"#f87171":"#60a5fa"},children:["Due ",new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),!i&&(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",flexShrink:0,position:"relative"},children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),s&&s(t)},title:"Edit card",style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #334155",background:"none",color:"#475569",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.15s",fontSize:"12px"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#8b5cf6",e.currentTarget.style.color="#8b5cf6"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color="#475569"},children:(0,r.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation();let t=e.currentTarget.getBoundingClientRect();b(t),u(!x),f(!1)},title:"Set due date",style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #334155",background:"none",color:y?"#60a5fa":"#475569",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.15s",fontSize:"12px"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#60a5fa",e.currentTarget.style.color="#60a5fa"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color=y?"#60a5fa":"#475569"},children:(0,r.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),(0,r.jsx)("path",{d:"M16 2v4M8 2v4M3 10h18"})]})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation();let t=e.currentTarget.getBoundingClientRect();b(t),f(!g),u(!1)},title:"Set reminder",style:{width:"24px",height:"24px",borderRadius:"4px",border:"1px solid #334155",background:"none",color:"#475569",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.15s",fontSize:"12px"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b",e.currentTarget.style.color="#f59e0b"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color="#475569"},children:(0,r.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[(0,r.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,r.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})}),x&&(0,r.jsx)(DueDatePicker,{taskId:t.id,currentDueDate:y,onSetDueDate:d,onClose:()=>u(!1),anchorRect:h}),g&&(0,r.jsx)(ReminderPicker,{taskId:t.id,taskTitle:t.title,onClose:()=>f(!1),anchorRect:h})]})]})})}function TaskColumn(e){let{title:t,tasks:o,accentColor:i,emptyText:l,dotColor:a,completedIds:d,onToggle:s,project:c,columnId:p,onDrop:x,onAddTask:u,showAddForm:g,onToggleAddForm:f,dueDates:h,onSetDueDate:b,onEdit:m,onReorder:y}=e,[v,j]=(0,n.useState)(!1),S=(0,n.useRef)(0),k=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let reset=()=>{S.current=0,j(!1)};document.addEventListener("dragend",reset);let e=k.current;return e&&e.addEventListener("dragreset",reset),()=>{document.removeEventListener("dragend",reset),e&&e.removeEventListener("dragreset",reset)}},[]),(0,r.jsxs)("div",{style:{flex:1,minWidth:"220px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",padding:"0 4px"},children:[(0,r.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:a}}),(0,r.jsx)("span",{style:{fontSize:"12px",fontWeight:700,color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),(0,r.jsx)("span",{style:{fontSize:"11px",color:"#475569",backgroundColor:"#0a2233",padding:"1px 6px",borderRadius:"4px",fontWeight:600},children:o.length}),f&&"__done__"!==p&&(0,r.jsx)(AddButton,{onClick:f,color:a})]}),(0,r.jsxs)("div",{ref:k,"data-drop-column":p,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},onDragEnter:e=>{e.preventDefault(),S.current++,j(!0)},onDragLeave:e=>{S.current--,0===S.current&&j(!1)},onDrop:e=>{e.preventDefault(),S.current=0,j(!1);let t=e.dataTransfer.getData("text/plain");if(!t||!x)return;let o=Array.from(e.currentTarget.querySelectorAll("[data-task-id]")),r=null;for(let t of o){let o=t.getBoundingClientRect();if(e.clientY<o.top+o.height/2){r=t.getAttribute("data-task-id");break}}x(t,p,r)},style:{backgroundColor:v?a+"10":"#1e293b",borderRadius:"10px",padding:"10px",minHeight:"120px",border:v?"2px dashed ".concat(a):"1px solid #334155",maxHeight:"70vh",overflowY:"auto",scrollbarWidth:"none",transition:"border 0.15s, background-color 0.15s"},children:[g&&(0,r.jsx)(AddTaskForm,{projectId:c.id,column:p,assignee:"__todo__"!==p&&"__upnext__"!==p&&"__done__"!==p?p:void 0,accentColor:i,onAdd:e=>{u&&u(e)},onCancel:f}),0!==o.length||g?o.map((e,t)=>(0,r.jsx)(TaskCard,{task:e,index:t,accentColor:i,isDone:isTaskDone(e,c,d),onToggle:s,dueDates:h,onSetDueDate:b,onEdit:m,onReorder:y},e.id||t)):(0,r.jsx)("div",{style:{padding:"20px",textAlign:"center",fontSize:"12px",color:v?a:"#475569",fontStyle:"italic"},children:v?"Drop here":l})]})]})}function DetailHeader(e){let{project:t,onBack:o}=e;return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[(0,r.jsxs)("button",{onClick:o,style:{background:"none",border:"1px solid #1e4258",borderRadius:"8px",color:"#94a3b8",padding:"8px 14px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",transition:"border-color 0.15s"},onMouseEnter:e=>e.currentTarget.style.borderColor="#64748b",onMouseLeave:e=>e.currentTarget.style.borderColor="#334155",children:[(0,r.jsx)("span",{style:{fontSize:"16px"},children:"←"})," All Projects"]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:t.color+"20",color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:700},children:t.icon||t.name.charAt(0)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"20px",color:"#f8fafc"},children:t.name}),t.description&&(0,r.jsx)("div",{style:{fontSize:"13px",color:"#64748b"},children:t.description})]})]})]})}function ProjectDetailView(e){let{project:t,onBack:o,completedIds:i,onToggle:l,dragOverrides:a,onDragDrop:d,userTasks:s,onAddUserTask:c,dueDates:p,onSetDueDate:x,onEditTask:u,columnOrder:g,onReorderInColumn:f,taskEdits:h}=e,[b,m]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),j=s.filter(e=>e._projectId===t.id),S=getAllTasks(t),k=[...S,...j],C=getAssignees(t);j.forEach(e=>{e.assignee&&!C.includes(e.assignee)&&C.push(e.assignee)});let _=C.length>0,getEffectiveColumn=e=>{let o=a[e.id];return"__done__"===o?"done":"__upnext__"===o?"upnext":"__todo__"===o?"todo":o&&"__done__"!==o&&"__upnext__"!==o&&"__todo__"!==o?"assignee:"+o:isTaskDone(e,t,i)?"done":e._userAdded?"__upnext__"===e._column?"upnext":"__done__"===e._column?"done":(e._column&&e._column.startsWith("__"),"todo"):isInUpnextArray(e,t)?"upnext":"todo"},getEffectiveAssignee=e=>{let t=a[e.id];return t&&!t.startsWith("__")?t:e.assignee},handleDrop=(e,o,r)=>{d&&d(e,o,t.id,r)},handleAddTask=e=>{c(e),m(null)},handleReorder=e=>(o,r)=>{f&&f(t.id,e,o,r)},handleEdit=e=>v(e),handleSaveEdit=e=>{u&&u(e),v(null)},w={mordy:"#f97316",yaakov:"#8b5cf6"};if(_){let e=applyEdits(k,h),n=applyColumnOrder(e.filter(e=>"done"===getEffectiveColumn(e)),"".concat(t.id,":__done__"),g),a=e.filter(e=>"done"!==getEffectiveColumn(e)),d=C.map(e=>({name:e,tasks:applyColumnOrder(sortByPriority(a.filter(t=>(getEffectiveAssignee(t)||"")===e)),"".concat(t.id,":").concat(e),g)})),s=applyColumnOrder(sortByPriority(a.filter(e=>!getEffectiveAssignee(e))),"".concat(t.id,":__todo__"),g);return(0,r.jsxs)("div",{children:[(0,r.jsx)(DetailHeader,{project:t,onBack:o}),(0,r.jsxs)("div",{style:{display:"flex",gap:"16px",overflowX:"auto",paddingBottom:"8px"},children:[d.map(e=>(0,r.jsx)(TaskColumn,{title:"".concat(e.name.charAt(0).toUpperCase()+e.name.slice(1)," To-Do"),tasks:e.tasks,accentColor:w[e.name]||"#60a5fa",dotColor:w[e.name]||"#60a5fa",emptyText:"Nothing for ".concat(e.name),completedIds:i,onToggle:l,project:t,columnId:e.name,onDrop:handleDrop,showAddForm:b===e.name,onToggleAddForm:()=>m(b===e.name?null:e.name),onAddTask:handleAddTask,dueDates:p,onSetDueDate:x,onEdit:handleEdit,onReorder:handleReorder(e.name)},e.name)),(s.length>0||"__general__"===b)&&(0,r.jsx)(TaskColumn,{title:"General",tasks:s,accentColor:"#94a3b8",dotColor:"#94a3b8",emptyText:"No general tasks",completedIds:i,onToggle:l,project:t,columnId:"__todo__",onDrop:handleDrop,showAddForm:"__general__"===b,onToggleAddForm:()=>m("__general__"===b?null:"__general__"),onAddTask:handleAddTask,dueDates:p,onSetDueDate:x,onEdit:handleEdit,onReorder:handleReorder("__todo__")}),(0,r.jsx)(TaskColumn,{title:"Done",tasks:n,accentColor:"#4ade80",dotColor:"#4ade80",emptyText:"Nothing completed yet",completedIds:i,onToggle:l,project:t,columnId:"__done__",onDrop:handleDrop,dueDates:p,onSetDueDate:x,onEdit:handleEdit,onReorder:handleReorder("__done__")})]}),y&&(0,r.jsx)(EditCardModal,{task:y,onSave:handleSaveEdit,onClose:()=>v(null)})]})}let T=applyEdits(k,h),I=applyColumnOrder(sortByPriority(T.filter(e=>"todo"===getEffectiveColumn(e))),"".concat(t.id,":__todo__"),g),D=applyColumnOrder(sortByPriority(T.filter(e=>"upnext"===getEffectiveColumn(e))),"".concat(t.id,":__upnext__"),g),z=applyColumnOrder(T.filter(e=>"done"===getEffectiveColumn(e)),"".concat(t.id,":__done__"),g);return(0,r.jsxs)("div",{children:[(0,r.jsx)(DetailHeader,{project:t,onBack:o}),(0,r.jsxs)("div",{style:{display:"flex",gap:"16px",overflowX:"auto",paddingBottom:"8px"},children:[(0,r.jsx)(TaskColumn,{title:"To Do",tasks:I,accentColor:"#94a3b8",dotColor:"#94a3b8",emptyText:"Backlog empty",completedIds:i,onToggle:l,project:t,columnId:"__todo__",onDrop:handleDrop,showAddForm:"__todo__"===b,onToggleAddForm:()=>m("__todo__"===b?null:"__todo__"),onAddTask:handleAddTask,dueDates:p,onSetDueDate:x,onEdit:handleEdit,onReorder:handleReorder("__todo__")}),(0,r.jsx)(TaskColumn,{title:"Up Next",tasks:D,accentColor:"#60a5fa",dotColor:"#60a5fa",emptyText:"Nothing queued",completedIds:i,onToggle:l,project:t,columnId:"__upnext__",onDrop:handleDrop,showAddForm:"__upnext__"===b,onToggleAddForm:()=>m("__upnext__"===b?null:"__upnext__"),onAddTask:handleAddTask,dueDates:p,onSetDueDate:x,onEdit:handleEdit,onReorder:handleReorder("__upnext__")}),(0,r.jsx)(TaskColumn,{title:"Done",tasks:z,accentColor:"#4ade80",dotColor:"#4ade80",emptyText:"Nothing completed yet",completedIds:i,onToggle:l,project:t,columnId:"__done__",onDrop:handleDrop,dueDates:p,onSetDueDate:x,onEdit:handleEdit,onReorder:handleReorder("__done__")})]}),y&&(0,r.jsx)(EditCardModal,{task:y,onSave:handleSaveEdit,onClose:()=>v(null)})]})}function GeneralTodoItem(e){let{todo:t,isDone:o,onToggle:n}=e,i={high:{bg:"#451a03",text:"#fb923c",label:"High"},medium:{bg:"#1e1b4b",text:"#a78bfa",label:"Medium"},low:{bg:"#0f172a",text:"#64748b",label:"Low"}}[t.priority]||null;return(0,r.jsx)("div",{style:{backgroundColor:"#0a2233",borderRadius:"8px",padding:"14px",borderLeft:"3px solid ".concat(o?"#4ade80":"#60a5fa"),opacity:o?.6:1,transition:"opacity 0.2s"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[(0,r.jsx)("div",{onClick:()=>n(t.id),style:{width:"20px",height:"20px",minWidth:"20px",borderRadius:"4px",border:o?"2px solid #4ade80":"2px solid #475569",backgroundColor:o?"#4ade8020":"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"1px",transition:"all 0.15s"},onMouseEnter:e=>{o||(e.currentTarget.style.borderColor="#94a3b8")},onMouseLeave:e=>{o||(e.currentTarget.style.borderColor="#475569")},children:o&&(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,r.jsx)("path",{d:"M2 6L5 9L10 3",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontWeight:600,fontSize:"13px",color:o?"#64748b":"#f8fafc",marginBottom:"4px",lineHeight:1.4,textDecoration:o?"line-through":"none"},children:t.title}),t.description&&!o&&(0,r.jsx)("div",{style:{fontSize:"12px",color:"#94a3b8",lineHeight:1.4,marginBottom:"8px"},children:t.description}),!o&&(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[i&&(0,r.jsx)("span",{style:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",fontWeight:600,backgroundColor:i.bg,color:i.text},children:i.label}),t.tags&&t.tags.map(e=>(0,r.jsx)("span",{style:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",backgroundColor:"#163344",color:"#94a3b8"},children:e},e))]})]})]})})}function GeneralTodosSection(e){let{todos:t,completedIds:o,onToggle:i,userTasks:l,onAddUserTask:a}=e,d=[...t||[],...(l||[]).filter(e=>!e._projectId)],s=d.filter(e=>!o.includes(e.id)),c=d.filter(e=>o.includes(e.id)),[p,x]=(0,n.useState)(!1);return(0,r.jsxs)("div",{style:{marginTop:"32px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"16px"},children:[(0,r.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#60a5fa"}}),(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:700,color:"#f8fafc"},children:"General To-Do"}),(0,r.jsx)("span",{style:{fontSize:"11px",color:"#475569",backgroundColor:"#163344",padding:"2px 8px",borderRadius:"4px",fontWeight:600},children:s.length}),(0,r.jsx)(AddButton,{onClick:()=>x(!p),color:"#60a5fa"})]}),p&&(0,r.jsx)("div",{style:{marginBottom:"12px",maxWidth:"400px"},children:(0,r.jsx)(AddTaskForm,{projectId:null,column:"__todo__",accentColor:"#60a5fa",onAdd:e=>{a({...e,_projectId:null}),x(!1)},onCancel:()=>x(!1)})}),0!==d.length||p?(0,r.jsxs)("div",{style:{display:"grid",gap:"8px",gridTemplateColumns:"repeat(auto-fill, minmax(340px, 1fr))"},children:[s.map(e=>(0,r.jsx)(GeneralTodoItem,{todo:e,isDone:!1,onToggle:i},e.id)),c.map(e=>(0,r.jsx)(GeneralTodoItem,{todo:e,isDone:!0,onToggle:i},e.id))]}):(0,r.jsx)("div",{style:{backgroundColor:"#163344",borderRadius:"10px",border:"1px solid #1e4258",padding:"24px",textAlign:"center",fontSize:"13px",color:"#475569",fontStyle:"italic"},children:"No general to-dos yet"})]})}function PotentialIdeaCard(e){let{biz:t}=e,[o,i]=(0,n.useState)(!1);return(0,r.jsxs)("div",{onClick:()=>i(!o),style:{backgroundColor:"#163344",borderRadius:"12px",border:"1px solid #1e4258",padding:"24px",cursor:"pointer",transition:"border-color 0.15s, transform 0.15s",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#1e4258",e.currentTarget.style.transform="translateY(0)"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",backgroundColor:"#f59e0b"}}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:o?"12px":"0"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#f59e0b20",color:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:700,flexShrink:0},children:t.icon||"✨"}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"16px",color:"#f8fafc"},children:t.title}),t.idea&&!o&&(0,r.jsx)("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.idea})]}),(0,r.jsx)("span",{style:{fontSize:"14px",color:"#475569",transition:"transform 0.2s",transform:o?"rotate(180deg)":"rotate(0deg)",display:"inline-block",flexShrink:0},children:"▼"})]}),o&&(0,r.jsxs)("div",{style:{borderTop:"1px solid #1e4258",paddingTop:"12px"},children:[t.idea&&(0,r.jsx)("div",{style:{fontSize:"13px",color:"#94a3b8",lineHeight:1.5,marginBottom:"8px"},children:t.idea}),t.notes&&(0,r.jsx)("div",{style:{padding:"12px",backgroundColor:"#0a2233",borderRadius:"8px",fontSize:"13px",color:"#cbd5e1",lineHeight:1.6,whiteSpace:"pre-wrap"},children:t.notes}),t.tags&&t.tags.length>0&&(0,r.jsx)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",marginTop:"8px"},children:t.tags.map(e=>(0,r.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:600,backgroundColor:"#f59e0b20",color:"#f59e0b"},children:e},e))}),!t.notes&&!t.idea&&(0,r.jsx)("div",{style:{fontSize:"12px",color:"#475569",fontStyle:"italic"},children:"No details yet"})]})]})}function PotentialIdeasSection(e){let{businesses:t}=e,[o,i]=(0,n.useState)(!1),[l,a]=(0,n.useState)(!1),[d,s]=(0,n.useState)(""),[c,p]=(0,n.useState)(""),handleAddIdea=()=>{if(!d.trim())return;let e=JSON.parse(localStorage.getItem("cc_potential_ideas")||"[]");e.push({id:"idea-"+Date.now().toString(36),title:d.trim(),idea:c.trim()||void 0,tags:[],createdAt:new Date().toISOString()}),localStorage.setItem("cc_potential_ideas",JSON.stringify(e)),s(""),p(""),a(!1),window.dispatchEvent(new Event("ideas-updated"))},x=JSON.parse(localStorage.getItem("cc_potential_ideas")||"[]"),u=[...t||[],...x];return(0,r.jsx)("div",{style:{marginTop:"32px"},children:(0,r.jsxs)("div",{onClick:()=>i(!o),style:{backgroundColor:"#163344",borderRadius:"12px",border:"1px solid #1e4258",padding:"24px",cursor:"pointer",transition:"border-color 0.15s, transform 0.15s",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#1e4258",e.currentTarget.style.transform="translateY(0)"},children:[(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",backgroundColor:"#f59e0b"}}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:o?"16px":"0"},children:[(0,r.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#f59e0b20",color:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:700,flexShrink:0},children:"✨"}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"16px",color:"#f8fafc"},children:"Potential Ideas"}),(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"2px"},children:[u.length," idea",1!==u.length?"s":""," — click to ",o?"collapse":"expand"]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{style:{fontSize:"24px",fontWeight:700,color:"#f59e0b"},children:u.length}),(0,r.jsx)("span",{style:{fontSize:"14px",color:"#475569",transition:"transform 0.2s",transform:o?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:"▼"})]})]}),o&&(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{style:{marginBottom:"16px"},children:l?(0,r.jsxs)("div",{style:{backgroundColor:"#0a2233",borderRadius:"8px",padding:"12px",border:"1px solid #f59e0b40"},children:[(0,r.jsx)("input",{autoFocus:!0,value:d,onChange:e=>s(e.target.value),placeholder:"Idea title...",style:{width:"100%",boxSizing:"border-box",backgroundColor:"#163344",border:"1px solid #334155",borderRadius:"6px",padding:"8px",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit",outline:"none",marginBottom:"6px"},onKeyDown:e=>{"Escape"===e.key&&a(!1),"Enter"===e.key&&d.trim()&&handleAddIdea()}}),(0,r.jsx)("textarea",{value:c,onChange:e=>p(e.target.value),placeholder:"Brief description (optional)...",rows:2,style:{width:"100%",boxSizing:"border-box",backgroundColor:"#163344",border:"1px solid #334155",borderRadius:"6px",padding:"8px",color:"#f8fafc",fontSize:"13px",fontFamily:"inherit",outline:"none",resize:"vertical",marginBottom:"8px"}}),(0,r.jsxs)("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end"},children:[(0,r.jsx)("button",{onClick:()=>a(!1),style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",fontSize:"12px",padding:"4px 8px"},children:"Cancel"}),(0,r.jsx)("button",{onClick:handleAddIdea,disabled:!d.trim(),style:{backgroundColor:d.trim()?"#f59e0b":"#334155",color:d.trim()?"#fff":"#64748b",border:"none",borderRadius:"6px",padding:"4px 12px",fontSize:"12px",fontWeight:600,cursor:d.trim()?"pointer":"default"},children:"Add"})]})]}):(0,r.jsx)("button",{onClick:()=>a(!0),style:{background:"none",border:"1px dashed #f59e0b40",borderRadius:"8px",padding:"10px",width:"100%",color:"#f59e0b",cursor:"pointer",fontSize:"13px",transition:"border-color 0.15s"},onMouseEnter:e=>e.currentTarget.style.borderColor="#f59e0b",onMouseLeave:e=>e.currentTarget.style.borderColor="#f59e0b40",children:"+ Add Idea"})}),u.length>0?(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"12px"},children:u.map(e=>(0,r.jsx)(PotentialIdeaCard,{biz:e},e.id))}):(0,r.jsx)("div",{style:{padding:"20px",textAlign:"center",fontSize:"13px",color:"#475569",fontStyle:"italic"},children:"No ideas yet — add your first one above"})]})]})})}function ArielSidebar(e){let{isOpen:t,onToggle:o}=e,[i,l]=(0,n.useState)([]),[a,d]=(0,n.useState)([]),[s,c]=(0,n.useState)([]);return(0,n.useEffect)(()=>{if(t){try{d(JSON.parse(localStorage.getItem("cc_change_requests")||"[]"))}catch(e){d([])}try{c(JSON.parse(localStorage.getItem("cc_reminders")||"[]"))}catch(e){c([])}l([{id:"heartbeat",name:"Heartbeat Check",schedule:"Every 30m",status:"active"},{id:"email-poll",name:"Email Polling",schedule:"Every 30m",status:"active"},{id:"memory-flush",name:"Memory Flush",schedule:"On compaction",status:"active"}])}},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:o,style:{position:"fixed",right:t?"min(340px, 90vw)":"0",top:"50%",transform:"translateY(-50%)",width:"32px",height:"64px",backgroundColor:"#163344",border:"1px solid #1e4258",borderRight:t?"none":"1px solid #1e4258",borderLeft:t?"1px solid #1e4258":"none",borderRadius:"8px 0 0 8px",color:"#94a3b8",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",zIndex:102,transition:"right 0.2s"},title:"Ariel Panel",children:t?"▶":"\uD83E\uDD81"}),(0,r.jsxs)("div",{style:{position:"fixed",right:0,top:0,bottom:0,width:"min(340px, 90vw)",backgroundColor:"#0f2233",borderLeft:"1px solid #1e4258",zIndex:101,transition:"transform 0.2s",transform:t?"translateX(0)":"translateX(100%)",overflowY:"auto",padding:"24px",boxSizing:"border-box"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"24px"},children:[(0,r.jsx)("span",{style:{fontSize:"24px"},children:"\uD83E\uDD81"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"16px",color:"#f8fafc"},children:"Ariel"}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#4ade80"},children:"Online"})]})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"10px"},children:"Scheduled Jobs"}),i.map(e=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",backgroundColor:"#163344",borderRadius:"8px",marginBottom:"6px"},children:[(0,r.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"active"===e.status?"#4ade80":"#f87171"}}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontSize:"13px",fontWeight:600,color:"#f8fafc"},children:e.name}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#64748b"},children:e.schedule})]})]},e.id))]}),s.filter(e=>"pending"===e.status).length>0&&(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"10px"},children:"Pending Reminders"}),s.filter(e=>"pending"===e.status).map(e=>(0,r.jsxs)("div",{style:{padding:"10px",backgroundColor:"#163344",borderRadius:"8px",marginBottom:"6px",borderLeft:"3px solid #f59e0b"},children:[(0,r.jsx)("div",{style:{fontSize:"13px",fontWeight:600,color:"#f8fafc"},children:e.taskTitle}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#f59e0b"},children:new Date(e.datetime).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},e.id))]}),a.length>0&&(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"10px"},children:"Change Requests"}),a.map(e=>(0,r.jsxs)("div",{style:{padding:"10px",backgroundColor:"#163344",borderRadius:"8px",marginBottom:"6px",borderLeft:"3px solid #8b5cf6"},children:[(0,r.jsx)("div",{style:{fontSize:"13px",color:"#f8fafc",lineHeight:1.4},children:e.text}),(0,r.jsxs)("div",{style:{fontSize:"10px",color:"#475569",marginTop:"4px"},children:[e.status," \xb7 ",timeAgo(e.createdAt)]})]},e.id))]}),(0,r.jsxs)("div",{style:{padding:"12px",backgroundColor:"#163344",borderRadius:"8px",fontSize:"12px",color:"#64748b",lineHeight:1.6},children:[(0,r.jsx)("div",{style:{fontWeight:600,color:"#94a3b8",marginBottom:"4px"},children:"System"}),(0,r.jsx)("div",{children:"Model: Claude Opus 4.6"}),(0,r.jsx)("div",{children:"Host: Clawdbot"}),(0,r.jsx)("div",{children:"Channel: Google Chat"})]})]})]})}function Home(){let[e,t]=(0,n.useState)(null),[o,i]=(0,n.useState)(null),[l,a]=(0,n.useState)(null),[d,s]=(0,n.useState)([]),[c,p]=(0,n.useState)({}),[x,u]=(0,n.useState)([]),[g,f]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1),[m,y]=(0,n.useState)({}),[v,j]=(0,n.useState)({}),[S,k]=(0,n.useState)({});(0,n.useEffect)(()=>{s(getCompletedIds()),p(getDragOverrides()),u(getUserTasks());try{y(JSON.parse(localStorage.getItem("cc_due_dates")||"{}"))}catch(e){y({})}j(getColumnOrder());try{k(JSON.parse(localStorage.getItem("cc_task_edits")||"{}"))}catch(e){k({})}},[]);let C=(0,n.useCallback)((e,t)=>{y(o=>{let r={...o};return t?r[e]=t:delete r[e],localStorage.setItem("cc_due_dates",JSON.stringify(r)),r})},[]),_=(0,n.useCallback)(e=>{u(t=>{let o=[...t,e];return saveUserTasks(o),o})},[]),w=(0,n.useCallback)(e=>{fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(()=>{})},[]),T=(0,n.useCallback)(t=>{if(!(null==e?void 0:e.projects))return null;for(let o of e.projects){let e=o.tasks||{};for(let r of["todo","upnext","in_progress","done"])if((e[r]||[]).some(e=>e.id===t))return o.id}return null},[e]),I=(0,n.useCallback)(e=>{let t=getCompletedIds().includes(e);s(t=>{let o=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem("cc_done",JSON.stringify(o)),o}),p(t=>{let o={...t};return delete o[e],saveDragOverrides(o),o});let o=T(e);o&&w({action:"complete",taskId:e,projectId:o,completed:!t})},[T,w]),D=(0,n.useCallback)((e,t,o,r)=>{if(!e)return;if("__done__"===t)s(t=>{if(t.includes(e))return t;let o=[...t,e];return localStorage.setItem("cc_done",JSON.stringify(o)),o}),p(t=>{let o={...t};return o[e]="__done__",saveDragOverrides(o),o});else{let o=getCompletedIds().filter(t=>t!==e);localStorage.setItem("cc_done",JSON.stringify(o)),s(o);let r={...getDragOverrides(),[e]:t};saveDragOverrides(r),p(r)}let n=o||T(e);n&&w({action:"move",taskId:e,projectId:n,targetColumn:t}),r&&n&&j(o=>{let i="".concat(n,":").concat(t),l=o[i]||[],a=l.filter(t=>t!==e),d=a.indexOf(r);d>=0?a.splice(d,0,e):a.push(e);let s={...o,[i]:a};return saveColumnOrder(s),s})},[T,w]),z=(0,n.useCallback)(e=>{k(t=>{let o={...t,[e.id]:e};return localStorage.setItem("cc_task_edits",JSON.stringify(o)),o}),u(t=>{let o=t.findIndex(t=>t.id===e.id);if(o>=0){let r=[...t];return r[o]={...r[o],...e},saveUserTasks(r),r}return t});let t=T(e.id);w({action:"edit",taskId:e.id,projectId:t||e._projectId||null,updates:{title:e.title,description:e.description,priority:e.priority,tags:e.tags,dueDate:e.dueDate}})},[T,w]),E=(0,n.useCallback)((e,t,o,r)=>{j(n=>{let i="".concat(e,":").concat(t),l=n[i]||[],a=l.filter(e=>e!==o),d=a.indexOf(r);d>=0?a.splice(d,0,o):a.push(o);let s={...n,[i]:a};return saveColumnOrder(s),s})},[]),R=(0,n.useCallback)((e,t)=>{"project"===e&&i(t),"ideas"===e&&(i(null),setTimeout(()=>{let e=document.getElementById("potential-ideas-section");e&&e.scrollIntoView({behavior:"smooth"})},100))},[]);if((0,n.useEffect)(()=>{let load=async()=>{try{let e=await fetch("/status.json?t="+Date.now());if(!e.ok)throw Error("HTTP ".concat(e.status));t(await e.json())}catch(e){a(e.message)}};load();let e=setInterval(load,6e4);return()=>clearInterval(e)},[]),l)return(0,r.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"#143d4f",padding:"24px",fontFamily:"system-ui, sans-serif"},children:(0,r.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",color:"#f87171",padding:"40px",textAlign:"center"},children:["Failed to load: ",l]})});if(!e)return(0,r.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"#143d4f",padding:"24px",fontFamily:"system-ui, sans-serif"},children:(0,r.jsx)("div",{style:{maxWidth:"1200px",margin:"0 auto",color:"#64748b",padding:"40px",textAlign:"center"},children:"Loading..."})});let A=e.projects||[],O=e.todos||[],B=o?A.find(e=>e.id===o):null,W=A.map(e=>({project:e,key:e.id})),getEffCol=(e,t)=>{let o=c[e.id];return"__done__"===o?"done":"__upnext__"===o?"upnext":"__todo__"===o?"todo":isTaskDone(e,t,d)?"done":isInUpnextArray(e,t)?"upnext":"todo"},L=0,M=0,P=0;A.forEach(e=>{getAllTasks(e).forEach(t=>{let o=getEffCol(t,e);"done"===o?P++:"upnext"===o?M++:L++})}),x.forEach(e=>{d.includes(e.id)?P++:"__upnext__"===e._column?M++:L++});let N=L+M+P+O.length;return(0,r.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#143d4f",padding:"24px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#f8fafc",marginRight:h?"min(340px, 90vw)":"32px",transition:"margin-right 0.2s"},children:[(0,r.jsx)("style",{children:"\n        ::-webkit-scrollbar { display: none; }\n        * { scrollbar-width: none; }\n      "}),(0,r.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,r.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",paddingBottom:"16px",borderBottom:"1px solid #1e4258",gap:"16px",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"linear-gradient(135deg, #8b5cf6, #06b6d4)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:800,color:"#fff"},children:"CC"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:700,fontSize:"18px",color:"#f8fafc"},children:"Command Center"}),(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#64748b"},children:[A.length," projects \xb7 ",N," tasks"]})]})]}),(0,r.jsx)(OmnisearchBar,{data:e,onNavigate:R,userTasks:x}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",position:"relative"},children:[e.lastUpdated&&(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#64748b"},children:["Updated ",timeAgo(e.lastUpdated)]}),(0,r.jsx)("button",{onClick:()=>f(!g),title:"Request a change",style:{width:"36px",height:"36px",borderRadius:"8px",border:"1px solid #1e4258",background:"none",color:"#64748b",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s",padding:0},onMouseEnter:e=>{e.currentTarget.style.borderColor="#8b5cf6",e.currentTarget.style.color="#8b5cf6"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#1e4258",e.currentTarget.style.color="#64748b"},children:(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),g&&(0,r.jsx)(ChangeRequestPopout,{onClose:()=>f(!1)})]})]}),B?(0,r.jsx)(ProjectDetailView,{project:B,onBack:()=>i(null),completedIds:d,onToggle:I,dragOverrides:c,onDragDrop:D,userTasks:x,onAddUserTask:_,dueDates:m,onSetDueDate:C,onEditTask:z,columnOrder:v,onReorderInColumn:E,taskEdits:S}):(0,r.jsxs)(r.Fragment,{children:[N>0&&(0,r.jsx)("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[{label:"To Do",count:L,color:"#94a3b8"},{label:"Up Next",count:M,color:"#60a5fa"},{label:"Done",count:P,color:"#4ade80"}].map(e=>(0,r.jsxs)("div",{style:{flex:1,backgroundColor:"#163344",borderRadius:"10px",border:"1px solid #1e4258",padding:"16px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{fontSize:"28px",fontWeight:700,color:e.color},children:e.count}),(0,r.jsx)("div",{style:{fontSize:"11px",color:"#64748b",textTransform:"uppercase",fontWeight:600,letterSpacing:"0.5px"},children:e.label})]},e.label))}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px"},children:W.map(e=>(0,r.jsx)(ProjectOverviewCard,{project:e.project,completedIds:d,dragOverrides:c,onClick:()=>i(e.project.id),userTasks:x},e.key))}),(0,r.jsx)(GeneralTodosSection,{todos:O,completedIds:d,onToggle:I,userTasks:x,onAddUserTask:_}),(0,r.jsx)("div",{id:"potential-ideas-section",children:(0,r.jsx)(PotentialIdeasSection,{businesses:e.potentialBusinesses||[]})})]})]}),(0,r.jsx)(ArielSidebar,{isOpen:h,onToggle:()=>b(!h)})]})}},622:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=o(2265),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,o){var r,i={},s=null,c=null;for(r in void 0!==o&&(s=""+o),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,r)&&!d.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:n,type:e,key:s,ref:c,props:i,_owner:a.current}}t.Fragment=i,t.jsx=q,t.jsxs=q},7437:function(e,t,o){"use strict";e.exports=o(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=7118)}),_N_E=e.O()}]);